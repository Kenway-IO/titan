<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN Framework | Kenway Consulting</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        kenway: {
                            navy: '#0f2c52', // Deep corporate navy
                            blue: '#007cc0', // Vibrant accent blue
                            red: '#D32F2F',  // Kenway Red accent
                            gray: '#f4f4f4', // Light gray background
                            text: '#333333', // Primary text
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .sidebar-link.active {
            background-color: #0f2c52; /* Kenway Navy */
            color: white;
            border-left: 4px solid #007cc0; /* Accent Blue */
        }
        
        .prose h2 {
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            color: #0f2c52;
            font-size: 1.75rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        
        .prose h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #0f2c52;
            font-size: 1.25rem;
        }
        
        .prose p {
            margin-bottom: 1.25rem;
            color: #4b5563;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #0f2c52 0%, #1e4070 100%);
        }
        
        .text-gradient-red {
             background: linear-gradient(90deg, #D32F2F 0%, #FFFFFF 100%);
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* Flow Chart Styles */
        .flow-line {
            position: absolute;
            background-color: #cbd5e1;
            z-index: 0;
        }
        .flow-node {
            transition: all 0.3s ease;
        }
        .flow-node:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-kenway-text antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Activity = (props) => <Icon {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></Icon>;
        const Database = (props) => <Icon {...props}><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></Icon>;
        const BrainCircuit = (props) => <Icon {...props}><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" /><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z" /><path d="M12 13h4" /><path d="M12 18h6a2 2 0 0 1 2 2v1" /><path d="M12 8h8" /></Icon>;
        const Zap = (props) => <Icon {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></Icon>;
        const Menu = (props) => <Icon {...props}><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></Icon>;
        const X = (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></Icon>;
        const Calculator = (props) => <Icon {...props}><rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="16" y1="14" x2="16" y2="14"></line><line x1="12" y1="14" x2="12" y2="14"></line><line x1="8" y1="14" x2="8" y2="14"></line><line x1="16" y1="18" x2="16" y2="18"></line><line x1="12" y1="18" x2="12" y2="18"></line><line x1="8" y1="18" x2="8" y2="18"></line></Icon>;
        const LayoutTemplate = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M3 9h18"></path><path d="M9 21V9"></path></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></Icon>;
        const Server = (props) => <Icon {...props}><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></Icon>;

        // --- Mock Data for Detail Views ---
        const FLOW_DETAILS = {
            'returns': {
                title: "Auto-Approve Returns",
                description: "Automated decision engine for processing low-risk e-commerce returns without human intervention.",
                steps: [
                    { id: 1, stage: "TRIGGER", label: "Case Closed", system: "Salesforce Service Cloud", icon: Zap, color: "bg-kenway-navy" },
                    { id: 2, stage: "INGEST", label: "Fetch Profile", system: "Snowflake Data Warehouse", icon: Database, color: "bg-kenway-blue" },
                    { id: 3, stage: "THINK", label: "Fraud Check", system: "Azure OpenAI (GPT-4)", icon: BrainCircuit, color: "bg-purple-600", highlight: true },
                    { id: 4, stage: "ACT", label: "Issue Refund", system: "Shopify Admin API", icon: Activity, color: "bg-orange-500" },
                    { id: 5, stage: "NOTIFY", label: "Email Customer", system: "SendGrid / Twilio", icon: CheckCircle, color: "bg-green-600" }
                ],
                techStack: ["Azure Event Grid", "Logic Apps", "Azure OpenAI Service", "Cosmos DB"]
            },
            'invoice': {
                title: "Vendor Invoice Scan",
                description: "OCR-based extraction and 3-way matching for accounts payable automation.",
                steps: [
                    { id: 1, stage: "TRIGGER", label: "Email Received", system: "Exchange Online", icon: Zap, color: "bg-kenway-navy" },
                    { id: 2, stage: "INGEST", label: "Parse PDF", system: "Azure AI Document Intelligence", icon: Database, color: "bg-kenway-blue" },
                    { id: 3, stage: "THINK", label: "Match PO", system: "SAP S/4HANA (Lookup)", icon: BrainCircuit, color: "bg-purple-600", highlight: true },
                    { id: 4, stage: "ACT", label: "Post Invoice", system: "SAP BAPI / OData", icon: Activity, color: "bg-orange-500" },
                    { id: 5, stage: "NOTIFY", label: "Update Portal", system: "Vendor Portal App", icon: CheckCircle, color: "bg-green-600" }
                ],
                techStack: ["Azure Functions", "Form Recognizer", "Service Bus", "SAP Integration Suite"]
            },
            'onboard': {
                title: "Employee Onboard",
                description: "Orchestrated provisioning of user accounts across Active Directory and SaaS tools.",
                steps: [
                    { id: 1, stage: "TRIGGER", label: "Hired Status", system: "Workday HCM", icon: Zap, color: "bg-kenway-navy" },
                    { id: 2, stage: "INGEST", label: "Get Roles", system: "HR Dept Matrix", icon: Database, color: "bg-kenway-blue" },
                    { id: 3, stage: "THINK", label: "Assign Groups", system: "Identity Governance Engine", icon: BrainCircuit, color: "bg-purple-600" },
                    { id: 4, stage: "ACT", label: "Create User", system: "Entra ID (Azure AD)", icon: Activity, color: "bg-orange-500" },
                    { id: 5, stage: "NOTIFY", label: "Welcome Msg", system: "Slack / Teams", icon: CheckCircle, color: "bg-green-600" }
                ],
                techStack: ["Microsoft Graph API", "Power Automate", "Key Vault"]
            }
        };


        // --- Components ---

        const Sidebar = ({ activeSection, setActiveSection, mobileOpen, setMobileOpen }) => {
            const links = [
                { id: 'intro', label: 'Introduction' },
                { id: 'methodology', label: 'The Methodology' },
                { id: 'loop', label: 'Visualizing TITAN' },
                { id: 'inventory', label: 'Discovery Inventory' },
                { id: 'roi', label: 'ROI Calculator' },
            ];

               return (
                <aside className={`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-200 ease-in-out ${mobileOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}>
                    <div className="flex items-center justify-between h-20 px-6 bg-kenway-navy text-white">
                        <div className="flex flex-col">
                            <span className="text-2xl font-bold tracking-tight">TITAN</span>
                            <span className="text-xs text-kenway-blue font-medium tracking-wider">FRAMEWORK</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <img src="./assets/Kenway IO Lab.jpg" alt="IO Lab" className="h-12 w-auto rounded bg-white/10" />
                            <button onClick={() => setMobileOpen(false)} className="md:hidden text-white opacity-80 hover:opacity-100">
                                <X size={24} />
                            </button>
                        </div>
                    </div>
                    <nav className="p-4 space-y-2 mt-4">
                        {links.map(link => (
                            <button
                                key={link.id}
                                onClick={() => {
                                    setActiveSection(link.id);
                                    setMobileOpen(false);
                                    document.getElementById(link.id).scrollIntoView({ behavior: 'smooth' });
                                }}
                                className={`flex items-center w-full px-4 py-3 text-sm font-semibold transition-all rounded-r-full sidebar-link ${activeSection === link.id ? 'active shadow-sm' : 'text-gray-600 hover:bg-gray-100 hover:text-kenway-navy'}`}
                            >
                                {link.label}
                            </button>
                        ))}
                    </nav>
                    <div className="absolute bottom-0 w-full p-6 border-t border-gray-100 bg-gray-50">
                        <p className="text-xs text-gray-500 font-medium">Â© 2024 Strategy & Architecture</p>
                        <p className="text-[10px] text-gray-400 mt-1 uppercase tracking-wider">Internal Confidential</p>
                    </div>
                </aside>
            );
        };

        const ArchitectureModal = ({ flowId, onClose }) => {
            if (!flowId || !FLOW_DETAILS[flowId]) return null;
            const data = FLOW_DETAILS[flowId];

            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-kenway-navy/50 backdrop-blur-sm animate-in fade-in duration-200">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto flex flex-col">
                        
                        {/* Header */}
                        <div className="p-8 border-b border-gray-100 flex justify-between items-start bg-gray-50 sticky top-0 z-10 rounded-t-2xl">
                            <div>
                                <div className="flex items-center gap-3 mb-2">
                                    <span className="bg-kenway-blue text-white px-2 py-1 rounded text-xs font-bold tracking-wider">ARCHITECTURE VIEW</span>
                                    <h2 className="text-2xl font-bold text-kenway-navy m-0">{data.title}</h2>
                                </div>
                                <p className="text-gray-600 m-0">{data.description}</p>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-gray-200 rounded-full transition-colors">
                                <X size={24} className="text-gray-500" />
                            </button>
                        </div>

                        {/* Content */}
                        <div className="p-8 md:p-12">
                            
                            {/* Flow Diagram */}
                            <div className="relative mb-16">
                                <h3 className="text-sm font-bold text-gray-400 uppercase tracking-widest mb-8">Data Flow Diagram</h3>
                                
                                {/* Desktop Flow */}
                                <div className="hidden md:flex justify-between items-center relative">
                                    {/* Connecting Line */}
                                    <div className="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-0 rounded"></div>
                                    
                                    {data.steps.map((step, idx) => (
                                        <div key={idx} className="relative z-10 flex flex-col items-center group cursor-default">
                                            <div className={`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg text-white mb-4 flow-node ${step.color} ${step.highlight ? 'ring-4 ring-purple-100 ring-offset-2' : ''}`}>
                                                <step.icon size={28} />
                                            </div>
                                            <div className="text-center bg-white p-2 rounded-lg border border-gray-100 shadow-sm w-32">
                                                <div className={`text-[10px] font-bold mb-1 ${step.color.replace('bg-', 'text-')}`}>{step.stage}</div>
                                                <div className="font-bold text-sm text-kenway-navy leading-tight">{step.label}</div>
                                                <div className="text-[10px] text-gray-500 mt-1 truncate">{step.system}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {/* Mobile Flow */}
                                <div className="md:hidden flex flex-col gap-8 relative">
                                    <div className="absolute left-8 top-0 h-full w-1 bg-gray-200 -z-0"></div>
                                    {data.steps.map((step, idx) => (
                                        <div key={idx} className="relative z-10 flex items-center gap-4">
                                            <div className={`w-16 h-16 shrink-0 rounded-2xl flex items-center justify-center shadow-lg text-white ${step.color}`}>
                                                <step.icon size={28} />
                                            </div>
                                            <div className="bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex-grow">
                                                <div className={`text-[10px] font-bold mb-1 ${step.color.replace('bg-', 'text-')}`}>{step.stage}</div>
                                                <div className="font-bold text-sm text-kenway-navy">{step.label}</div>
                                                <div className="text-xs text-gray-500">{step.system}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Tech Stack & Details */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div className="bg-gray-50 p-6 rounded-xl border border-gray-200">
                                    <h4 className="flex items-center gap-2 font-bold text-kenway-navy mb-4">
                                        <Server size={20} /> Recommended Tech Stack
                                    </h4>
                                    <ul className="space-y-2">
                                        {data.techStack.map((tech, i) => (
                                            <li key={i} className="flex items-center gap-2 text-sm text-gray-700">
                                                <CheckCircle size={16} className="text-green-500" /> {tech}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                                <div className="bg-blue-50 p-6 rounded-xl border border-blue-100">
                                    <h4 className="flex items-center gap-2 font-bold text-kenway-navy mb-4">
                                        <Activity size={20} /> Success Criteria
                                    </h4>
                                    <p className="text-sm text-gray-700">
                                        The <strong>NOTIFY</strong> stage MUST confirm the transaction ID back to the source system ({data.steps[0].system}). 
                                        Failure to receive a 200 OK receipt triggers a retry policy (Exponential Backoff, Max 5 attempts).
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const TitanCard = ({ letter, title, icon: Icon, desc, color }) => (
            <div className="card-hover relative p-8 bg-white border border-gray-100 rounded-xl shadow-sm transition-all duration-300">
                <div className={`absolute top-0 right-0 p-4 opacity-10 ${color}`}>
                    <Icon size={64} />
                </div>
                <div className="flex items-center gap-4 mb-4">
                    <span className={`flex shrink-0 items-center justify-center w-12 h-12 text-2xl font-bold text-white rounded-lg shadow-md ${color.replace('text-', 'bg-')}`}>
                        {letter}
                    </span>
                    <h3 className="text-xl font-bold text-kenway-navy m-0">{title}</h3>
                </div>
                <p className="text-xs text-kenway-blue leading-relaxed font-bold">
                    {desc}
                </p>
            </div>
        );

        const TitanLoopVisual = () => {
            return (
                <div className="relative w-full max-w-lg mx-auto my-16 aspect-square flex items-center justify-center bg-white rounded-full shadow-inner p-12">
                    {/* Central Brain */}
                    <div className="absolute z-20 flex flex-col items-center justify-center w-36 h-36 bg-kenway-navy text-white rounded-full shadow-2xl border-4 border-kenway-blue">
                        <BrainCircuit size={48} className="text-white mb-2 opacity-90" />
                        <span className="text-sm font-bold tracking-widest">THINK</span>
                        <span className="text-[10px] text-gray-300 text-center px-2 mt-1 font-medium">Intelligence Layer</span>
                    </div>

                    {/* Orbit Ring */}
                    <div className="absolute w-3/4 h-3/4 border-2 border-dashed border-gray-300 rounded-full animate-[spin_80s_linear_infinite]"></div>

                    {/* Nodes */}
                    <div className="absolute top-0 left-1/2 -translate-x-1/2 translate-y-4 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-kenway-navy rounded-full flex items-center justify-center shadow-lg text-kenway-navy mb-2 z-10">
                            <Zap size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">TRIGGER</span>
                    </div>

                    <div className="absolute top-1/2 right-0 -translate-x-4 -translate-y-1/2 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-kenway-blue rounded-full flex items-center justify-center shadow-lg text-kenway-blue mb-2 z-10">
                            <Database size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">INGEST</span>
                    </div>

                    <div className="absolute bottom-0 left-1/2 -translate-x-1/2 -translate-y-4 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-orange-500 rounded-full flex items-center justify-center shadow-lg text-orange-500 mt-2 order-2 z-10">
                            <Activity size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm order-1">ACT</span>
                    </div>

                    <div className="absolute top-1/2 left-0 translate-x-4 -translate-y-1/2 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-green-600 rounded-full flex items-center justify-center shadow-lg text-green-600 mb-2 z-10">
                            <CheckCircle size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">NOTIFY</span>
                    </div>
                </div>
            );
        };

        const InventoryTable = ({ onSelectFlow }) => {
            const rows = [
                { id: 'returns', name: "Auto-Approve Returns", impact: "$200k/yr", trigger: "Case Closed", ingest: "LTV, Order Hist", think: "AI: Policy Match", act: "Shopify Refund", notify: "Email Customer" },
                { id: 'invoice', name: "Vendor Invoice Scan", impact: "$85k/yr", trigger: "Email Received", ingest: "PDF Parsing", think: "AI: Extraction", act: "SAP Post", notify: "Vendor Portal" },
                { id: 'onboard', name: "Employee Onboard", impact: "$40k/yr", trigger: "Workday Hire", ingest: "Dept Profile", think: "Rule: Role Map", act: "AD Create", notify: "Slack Manager" },
            ];

            return (
                <div className="overflow-x-auto bg-white border border-gray-200 rounded-xl shadow-lg">
                    <table className="min-w-full divide-y divide-gray-200 text-sm">
                        <thead className="bg-kenway-navy text-white">
                            <tr>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide">Opportunity</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide">Impact</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide text-kenway-blue">T - Trigger</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide text-cyan-400">I - Ingest</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide text-purple-300">T - Think</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide text-orange-300">A - Act</th>
                                <th className="px-6 py-4 text-left font-semibold tracking-wide text-green-300">N - Notify</th>
                                <th className="px-6 py-4"></th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-gray-100">
                            {rows.map((row, idx) => (
                                <tr key={idx} className="hover:bg-blue-50 transition-colors group">
                                    <td className="px-6 py-4 font-bold text-kenway-navy">{row.name}</td>
                                    <td className="px-6 py-4 text-gray-600 font-medium">{row.impact}</td>
                                    <td className="px-6 py-4 text-gray-500">{row.trigger}</td>
                                    <td className="px-6 py-4 text-gray-500">{row.ingest}</td>
                                    <td className="px-6 py-4">
                                        <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200">
                                            {row.think}
                                        </span>
                                    </td>
                                    <td className="px-6 py-4 text-gray-500">{row.act}</td>
                                    <td className="px-6 py-4 text-gray-500">{row.notify}</td>
                                    <td className="px-6 py-4 text-right">
                                        <button 
                                            onClick={() => onSelectFlow(row.id)}
                                            className="opacity-0 group-hover:opacity-100 transition-opacity bg-kenway-blue text-white px-3 py-1.5 rounded text-xs font-semibold flex items-center gap-1 hover:bg-kenway-navy"
                                        >
                                            View <ArrowRight size={12}/>
                                        </button>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        };

        const ROICalc = () => {
            const [volume, setVolume] = useState(500);
            const [minutes, setMinutes] = useState(15);
            const [rate, setRate] = useState(50);
            const [cost, setCost] = useState(25000);

            const annualSavings = (volume * (minutes / 60) * rate) * 12;
            const roiMonths = cost / (annualSavings / 12);

            return (
                <div className="bg-white border border-gray-200 p-8 rounded-xl shadow-lg">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div className="space-y-6">
                            <h4 className="font-bold text-kenway-navy flex items-center gap-2 text-lg border-b border-gray-100 pb-2">
                                <Calculator size={20} className="text-kenway-blue" /> Opportunity Inputs
                            </h4>
                            <div className="grid grid-cols-1 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Monthly Volume</label>
                                    <input type="number" value={volume} onChange={e => setVolume(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Manual Time (Mins/Unit)</label>
                                    <input type="number" value={minutes} onChange={e => setMinutes(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Hourly Labor Rate ($)</label>
                                    <input type="number" value={rate} onChange={e => setRate(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Est. Implementation Cost ($)</label>
                                    <input type="number" value={cost} onChange={e => setCost(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                            </div>
                        </div>
                        <div className="bg-kenway-navy text-white p-8 rounded-xl shadow-inner flex flex-col justify-center space-y-8 relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-8 opacity-5">
                                <Activity size={120} />
                            </div>
                            <div className="relative z-10">
                                <span className="block text-sm text-blue-200 font-medium uppercase tracking-wider mb-1">Projected Annual Savings</span>
                                <span className="text-4xl font-bold text-white">${annualSavings.toLocaleString()}</span>
                            </div>
                            <div className="relative z-10">
                                <span className="block text-sm text-blue-200 font-medium uppercase tracking-wider mb-1">ROI Break-even</span>
                                <span className="text-4xl font-bold text-kenway-blue">{roiMonths.toFixed(1)} Months</span>
                            </div>
                            <div className="text-xs text-gray-400 mt-4 pt-4 border-t border-blue-900">
                                *Estimates based on provided labor inputs. Actual results may vary based on complexity.
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const App = () => {
            const [mobileOpen, setMobileOpen] = useState(false);
            const [activeSection, setActiveSection] = useState('intro');
            const [selectedFlow, setSelectedFlow] = useState(null);

            // Handle URL params for deep linking
            useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const flowId = params.get('flow');
                if (flowId && FLOW_DETAILS[flowId]) {
                    setSelectedFlow(flowId);
                }
            }, []);

            const handleFlowSelect = (id) => {
                setSelectedFlow(id);
                // Update URL without refresh
                const url = new URL(window.location);
                url.searchParams.set('flow', id);
                window.history.pushState({}, '', url);
            };

            const handleCloseModal = () => {
                setSelectedFlow(null);
                const url = new URL(window.location);
                url.searchParams.delete('flow');
                window.history.pushState({}, '', url);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <Sidebar 
                        activeSection={activeSection} 
                        setActiveSection={setActiveSection} 
                        mobileOpen={mobileOpen} 
                        setMobileOpen={setMobileOpen} 
                    />

                    {/* Mobile Header */}
                    <div className="md:hidden flex items-center justify-between p-4 bg-kenway-navy text-white fixed top-0 w-full z-40 shadow-md">
                        <span className="text-lg font-bold">TITAN Framework</span>
                        <button onClick={() => setMobileOpen(true)}>
                            <Menu size={24} />
                        </button>
                    </div>

                    {/* Architecture Modal */}
                    {selectedFlow && (
                        <ArchitectureModal 
                            flowId={selectedFlow} 
                            onClose={handleCloseModal} 
                        />
                    )}

                    {/* Main Content */}
                    <main className="md:ml-64 pt-20 md:pt-0">
                        <div className="max-w-5xl mx-auto px-8 py-16 prose prose-slate">
                            
                            {/* Hero Section */}
                            <section id="intro" className="mb-24">
                                <div className="hero-gradient text-white p-12 rounded-2xl mb-10 shadow-xl relative overflow-hidden">
                                    <div className="relative z-10">
                                        <h1 className="text-4xl md:text-5xl font-bold mb-6 tracking-tight !text-white !mt-0 text-gradient-red">TITAN Framework</h1>
                                        <p className="!text-cyan-200 text-xl leading-relaxed !mb-0 max-w-2xl font-medium">
                                            The enterprise standard for building <strong>Cognitive Integration Loops</strong>. 
                                            Move beyond "dumb pipes" to autonomous systems that think and act.
                                        </p>
                                    </div>
                                    <div className="absolute right-0 bottom-0 opacity-10 transform translate-x-12 translate-y-12">
                                        <BrainCircuit size={300} />
                                    </div>
                                </div>
                                
                                <div className="bg-white border-l-4 border-kenway-blue p-6 rounded-r-lg shadow-sm">
                                    <h4 className="text-kenway-navy font-bold m-0 flex items-center gap-3 text-lg">
                                        <LayoutTemplate size={20} className="text-kenway-blue"/> Enterprise Architecture Standard
                                    </h4>
                                    <p className="m-0 text-gray-600 mt-2">
                                    Designed specifically for the modern enterprise stack: <strong>Dynamics 365 F&SCM</strong>, <strong>Business Central</strong>, <strong>Salesforce</strong>, and <strong>SAP</strong>. TITAN replaces fragile point-to-point integrations with a robust, event-driven architecture pattern standardizing communication across Azure, AWS, and SAP BTP.
                                    </p>
                                </div>

                                <p className="text-lg mt-8 leading-relaxed">
                                    Modern enterprises cannot survive on "Data Movement" alone. They require "Decision Velocity." 
                                    The TITAN framework provides a rigorous taxonomy for identifying, building, and measuring 
                                    automation loops that drive business value.
                                </p>
                            </section>

                            {/* Methodology Section */}
                            <section id="methodology" className="mb-24 pt-10">
                                <h2>The Methodology</h2>
                                <p className="text-lg">
                                    Every robust automation consists of five distinct stages. Failing to account for any single stage results in fragile, unscalable integrations.
                                </p>

                                <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mt-10 not-prose">
                                    <TitanCard 
                                        letter="T" title="Trigger" color="text-kenway-navy" icon={Zap}
                                        desc="The Pulse. What initiates the loop? Is it a Business Event (Order Placed), a Temporal Event (End of Day), or a Sensor Event?" 
                                    />
                                    <TitanCard 
                                        letter="I" title="Ingest" color="text-kenway-blue" icon={Database}
                                        desc="The Context. Raw triggers are rarely enough. We must 'hydrate' the event with historical data, master data, and cross-reference IDs." 
                                    />
                                    
                                    <TitanCard 
                                        letter="T" title="Think" color="text-purple-600" icon={BrainCircuit}
                                        desc="The Intelligence. The differentiator. Do we apply simple Boolean logic, or do we invoke Agentic AI to analyze sentiment and probability?" 
                                    />
                                    
                                    <TitanCard 
                                        letter="A" title="Act" color="text-orange-500" icon={Activity}
                                        desc="The Muscle. The deterministic state change in the target system. This must be idempotent and transactional." 
                                    />
                                    <TitanCard 
                                        letter="N" title="Notify" color="text-green-600" icon={CheckCircle}
                                        desc="The Resolution. Closing the loop. How do we prove success? Who is alerted on failure? The 'Receipt' of the transaction." 
                                    />
                                </div>
                            </section>

                            {/* Visualizing Loop Section */}
                            <section id="loop" className="mb-24 pt-10">
                                <h2>Visualizing the Loop</h2>
                                <p className="text-lg">
                                    Unlike linear ETL pipelines, a TITAN is a continuous loop. The "Notify" step of one process often becomes the "Trigger" for the next, creating a self-reinforcing system of intelligence.
                                </p>
                                <TitanLoopVisual />
                            </section>

                            {/* Inventory Section */}
                            <section id="inventory" className="mb-24 pt-10">
                                <h2>Discovery Inventory</h2>
                                <p className="text-lg">
                                    Use the <strong>TITAN Controlled Vocabulary</strong> to build your backlog. Select a row to view the architecture deep-dive.
                                </p>
                                <div className="not-prose mt-10">
                                    <InventoryTable onSelectFlow={handleFlowSelect} />
                                </div>
                            </section>

                            {/* ROI Section */}
                            <section id="roi" className="mb-24 pt-10">
                                <h2>ROI Estimation Engine</h2>
                                <p className="text-lg">
                                    Don't build just to build. Use the standard formula to justify the engineering effort for every TITAN loop.
                                </p>
                                <div className="not-prose mt-10">
                                    <ROICalc />
                                </div>
                            </section>

                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
