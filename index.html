<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN Framework | Kenway Consulting Style</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        kenway: {
                            navy: '#0f2c52', // Deep corporate navy
                            blue: '#007cc0', // Vibrant accent blue
                            red: '#D32F2F',  // Kenway Red accent
                            gray: '#f4f4f4', // Light gray background
                            text: '#333333', // Primary text
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .sidebar-link.active {
            background-color: #0f2c52; /* Kenway Navy */
            color: white;
            border-left: 4px solid #007cc0; /* Accent Blue */
        }
        
        .prose h2 {
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            color: #0f2c52;
            font-size: 1.75rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        
        .prose h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #0f2c52;
            font-size: 1.25rem;
        }
        
        .prose p {
            margin-bottom: 1.25rem;
            color: #4b5563;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #0f2c52 0%, #1e4070 100%);
        }
        
        .text-gradient-red {
             background: linear-gradient(90deg, #D32F2F 0%, #FFFFFF 100%);
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Flow Chart Styles */
        .flow-line {
            position: absolute;
            background-color: #cbd5e1;
            z-index: 0;
        }
        .flow-node {
            transition: all 0.3s ease;
        }
        .flow-node:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        /* Modal Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="bg-gray-50 text-kenway-text antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Activity = (props) => <Icon {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></Icon>;
        const Database = (props) => <Icon {...props}><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></Icon>;
        const BrainCircuit = (props) => <Icon {...props}><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" /><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z" /><path d="M12 13h4" /><path d="M12 18h6a2 2 0 0 1 2 2v1" /><path d="M12 8h8" /></Icon>;
        const Zap = (props) => <Icon {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></Icon>;
        const Menu = (props) => <Icon {...props}><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></Icon>;
        const X = (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></Icon>;
        const Calculator = (props) => <Icon {...props}><rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="16" y1="14" x2="16" y2="14"></line><line x1="12" y1="14" x2="12" y2="14"></line><line x1="8" y1="14" x2="8" y2="14"></line><line x1="16" y1="18" x2="16" y2="18"></line><line x1="12" y1="18" x2="12" y2="18"></line><line x1="8" y1="18" x2="8" y2="18"></line></Icon>;
        const LayoutTemplate = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M3 9h18"></path><path d="M9 21V9"></path></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></Icon>;
        const Server = (props) => <Icon {...props}><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></Icon>;
        const ChevronUp = (props) => <Icon {...props}><polyline points="18 15 12 9 6 15"></polyline></Icon>;
        const ChevronDown = (props) => <Icon {...props}><polyline points="6 9 12 15 18 9"></polyline></Icon>;
        const Lightbulb = (props) => <Icon {...props}><line x1="9" y1="18" x2="15" y2="18"></line><line x1="10" y1="22" x2="14" y2="22"></line><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 12 3 4.65 4.65 0 0 0 7.5 7.5c0 2.11 1.32 4.3 4 5.18V14a2 2 0 0 0 2 2Z"></path></Icon>;
        const ShieldCheck = (props) => <Icon {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></Icon>;

        // Icon mapping helper since we are loading data from JSON strings
        const IconMap = {
            Zap: Zap,
            Database: Database,
            BrainCircuit: BrainCircuit,
            Activity: Activity,
            CheckCircle: CheckCircle
        };

        // --- METHODOLOGY DETAIL DATA ---
        const METHODOLOGY_DETAILS = {
            'T1': {
                letter: 'T',
                title: 'Trigger',
                subtitle: 'The Pulse of the Enterprise',
                color: 'text-kenway-navy',
                bgColor: 'bg-kenway-navy',
                bgLight: 'bg-blue-50',
                border: 'border-kenway-navy',
                icon: Zap,
                animation: 'animate-pulse',
                description: "Integration shouldn't be a scheduled batch job. It should be a nervous system reaction. A Trigger is the precise moment a business event occurs—an order placed, a sensor threshold breached, or a status changed.",
                valueProp: "Stop polling. Start reacting.",
                examples: [
                    { title: "Business Events", desc: "Salesforce Opportunity Closed-Won" },
                    { title: "IoT Signals", desc: "Freezer Truck Temp > 0°C" },
                    { title: "System States", desc: "Inventory Level < Safety Stock" }
                ],
                kenwayEdge: "We implement Event-Driven Architectures (EDA) using Azure Event Grid and Kafka to eliminate the latency of legacy polling systems. If your data is 24 hours old, it's already a liability."
            },
            'I': {
                letter: 'I',
                title: 'Ingest',
                subtitle: 'The Context Engine',
                color: 'text-kenway-blue',
                bgColor: 'bg-kenway-blue',
                bgLight: 'bg-cyan-50',
                border: 'border-kenway-blue',
                icon: Database,
                animation: 'animate-bounce',
                description: "Raw triggers are rarely enough. 'Order 123 Created' tells you nothing about VIP status or fraud risk. The Ingest stage instantly hydrates the event with historical data, master data, and cross-reference IDs.",
                valueProp: "Data without context is just noise.",
                examples: [
                    { title: "Hydration", desc: "Fetch Customer Lifetime Value (LTV)" },
                    { title: "Normalization", desc: "Map SAP Material ID to Salesforce Product Code" },
                    { title: "Security", desc: "Validate API Keys & Claims" }
                ],
                kenwayEdge: "We use the 'Claim Check' pattern to keep your message bus fast. Heavy payloads stay in storage; only the context moves. This ensures we can scale to millions of events without clogging the pipes."
            },
            'T2': {
                letter: 'T',
                title: 'Think',
                subtitle: 'The Intelligence Layer',
                color: 'text-purple-600',
                bgColor: 'bg-purple-600',
                bgLight: 'bg-purple-50',
                border: 'border-purple-600',
                icon: BrainCircuit,
                animation: 'animate-pulse',
                description: "This is where 'Pipe Builders' fail and 'TITAN Architects' succeed. We don't just move data; we inspect it. This layer applies business logic, policy rules, or Agentic AI to decide *what* to do next.",
                valueProp: "Move from automation to autonomy.",
                examples: [
                    { title: "Boolean Rules", desc: "IF Order > $10k THEN Route to Concierge" },
                    { title: "Agentic AI", desc: "Use LLM to summarize support ticket sentiment" },
                    { title: "Anomaly Detect", desc: "Flag invoice if 30% higher than average" }
                ],
                kenwayEdge: "We embed decisioning *inside* the integration stream. By decoupling the logic from the destination system, we prevent your ERP from becoming a spaghetti-code mess of custom rules."
            },
            'A': {
                letter: 'A',
                title: 'Act',
                subtitle: 'The Muscle',
                color: 'text-orange-500',
                bgColor: 'bg-orange-500',
                bgLight: 'bg-orange-50',
                border: 'border-orange-500',
                icon: Activity,
                animation: 'animate-spin-slow', 
                description: "The deterministic state change. This is the API call, the database write, or the provisioning command. It must be rugged, reliable, and capable of handling partial failures without corrupting data.",
                valueProp: "Execute with precision.",
                examples: [
                    { title: "CRUD", desc: "Create Customer Record in SAP" },
                    { title: "Provisioning", desc: "Create Active Directory User" },
                    { title: "Financial", desc: "Post Journal Entry to Ledger" }
                ],
                kenwayEdge: "We enforce Idempotency keys on every transaction. If the network blips and we send the request twice, your system is smart enough to only process it once. Zero duplicate orders. Zero double-payments."
            },
            'N': {
                letter: 'N',
                title: 'Notify',
                subtitle: 'The Resolution',
                color: 'text-green-600',
                bgColor: 'bg-green-600',
                bgLight: 'bg-green-50',
                border: 'border-green-600',
                icon: CheckCircle,
                animation: 'animate-none',
                description: "Fire-and-forget is a myth. If you don't know it finished, it didn't happen. The Notify stage closes the loop, updating the source system, alerting a human, or logging the audit trail.",
                valueProp: "Every action needs a receipt.",
                examples: [
                    { title: "Write-Back", desc: "Update Salesforce Opportunity to 'Synced'" },
                    { title: "Alerting", desc: "Post to Slack Channel #sales-wins" },
                    { title: "Failure Ops", desc: "Create ServiceNow Ticket for failure" }
                ],
                kenwayEdge: "We build 'Observable Systems'. Every transaction generates a trace ID. If an order fails, we don't just log an error; we trigger a 'Compensating Transaction' to roll back changes and alert your ops team instantly."
            }
        };

        // --- Mock Data for Detail Views ---
        const FLOW_DETAILS = {
            'returns': {
                title: "Auto-Approve Returns",
                impact: "$200k/yr",
                description: "Automated decision engine for processing low-risk e-commerce returns without human intervention.",
                steps: [
                    { id: 1, stage: "TRIGGER", label: "Case Closed", system: "Salesforce Service Cloud", icon: "Zap", color: "bg-kenway-navy" },
                    { id: 2, stage: "INGEST", label: "Fetch Profile", system: "Snowflake Data Warehouse", icon: "Database", color: "bg-kenway-blue" },
                    { id: 3, stage: "THINK", label: "Fraud Check", system: "Azure OpenAI (GPT-4)", icon: "BrainCircuit", color: "bg-purple-600", highlight: true },
                    { id: 4, stage: "ACT", label: "Issue Refund", system: "Shopify Admin API", icon: "Activity", color: "bg-orange-500" },
                    { id: 5, stage: "NOTIFY", label: "Email Customer", system: "SendGrid / Twilio", icon: "CheckCircle", color: "bg-green-600" }
                ],
                techStack: ["Azure Event Grid", "Logic Apps", "Azure OpenAI Service", "Cosmos DB"],
                successCriteria: "The NOTIFY stage MUST confirm the transaction ID back to Salesforce Service Cloud. Failure to receive a 200 OK receipt triggers a retry policy (Exponential Backoff, Max 5 attempts)."
            },
            // ... (Other flows would be here in prod, falling back to mock if file fetch fails)
        };


        // --- Components ---

        const Sidebar = ({ activeSection, setActiveSection, mobileOpen, setMobileOpen }) => {
            const links = [
                { id: 'intro', label: 'Introduction' },
                { id: 'methodology', label: 'The Methodology' },
                { id: 'loop', label: 'Visualizing TITAN' },
                { id: 'inventory', label: 'Discovery Inventory' },
                { id: 'roi', label: 'ROI Calculator' },
            ];

            return (
                <aside className={`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-200 ease-in-out ${mobileOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}>
                    <div className="flex items-center justify-between h-20 px-6 bg-kenway-navy text-white">
                        <div className="flex flex-col">
                            <span className="text-2xl font-bold tracking-tight">TITAN</span>
                            <span className="text-xs text-kenway-blue font-medium tracking-wider">FRAMEWORK</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <img src="assets/Kenway%20IO%20Lab.jpg" alt="IO Lab" className="h-12 w-auto rounded bg-white/10" onError={(e) => e.target.style.display = 'none'} />
                            <button onClick={() => setMobileOpen(false)} className="md:hidden text-white opacity-80 hover:opacity-100">
                                <X size={24} />
                            </button>
                        </div>
                    </div>
                    <nav className="p-4 space-y-2 mt-4">
                        {links.map(link => (
                            <button
                                key={link.id}
                                onClick={() => {
                                    setActiveSection(link.id);
                                    setMobileOpen(false);
                                    document.getElementById(link.id).scrollIntoView({ behavior: 'smooth' });
                                }}
                                className={`flex items-center w-full px-4 py-3 text-sm font-semibold transition-all rounded-r-full sidebar-link ${activeSection === link.id ? 'active shadow-sm' : 'text-gray-600 hover:bg-gray-100 hover:text-kenway-navy'}`}
                            >
                                {link.label}
                            </button>
                        ))}
                    </nav>
                    <div className="absolute bottom-0 w-full p-6 border-t border-gray-100 bg-gray-50">
                        <p className="text-xs text-gray-500 font-medium">© 2025 CEAD Practice</p>
                        <p className="text-[10px] text-gray-400 mt-1 uppercase tracking-wider">Automation Frameworks</p>
                    </div>
                </aside>
            );
        };

        const MethodologyModal = ({ stepId, onClose }) => {
            if (!stepId || !METHODOLOGY_DETAILS[stepId]) return null;
            const data = METHODOLOGY_DETAILS[stepId];
            const Icon = data.icon;

            return (
                <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-kenway-navy/60 backdrop-blur-sm animate-fade-in" onClick={onClose}>
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col animate-slide-up" onClick={e => e.stopPropagation()}>
                        
                        {/* Header */}
                        <div className={`p-8 border-b border-gray-100 flex justify-between items-start ${data.bgLight} sticky top-0 z-10 rounded-t-2xl`}>
                            <div className="flex gap-6 items-center">
                                <div className={`w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg text-white ${data.bgColor}`}>
                                    <Icon size={40} className={data.animation === 'animate-spin-slow' ? 'animate-[spin_3s_linear_infinite]' : data.animation} />
                                </div>
                                <div>
                                    <div className="flex items-center gap-3 mb-1">
                                        <span className={`px-3 py-1 rounded-full text-xs font-bold tracking-wider bg-white border ${data.border} ${data.color}`}>
                                            STAGE: {data.title.toUpperCase()}
                                        </span>
                                    </div>
                                    <h2 className={`text-3xl font-bold ${data.color} m-0 tracking-tight`}>{data.title}</h2>
                                    <p className="text-lg text-gray-600 font-medium m-0 mt-1">{data.subtitle}</p>
                                </div>
                            </div>
                            <button onClick={onClose} className="p-2 bg-white rounded-full shadow-sm hover:bg-gray-100 transition-colors text-gray-500">
                                <X size={24} />
                            </button>
                        </div>

                        {/* Content */}
                        <div className="p-8 md:p-10 space-y-10">
                            
                            {/* Main Description */}
                            <div className="prose max-w-none">
                                <p className="text-xl font-light leading-relaxed text-gray-800">
                                    "{data.valueProp}"
                                </p>
                                <p className="text-gray-600 leading-relaxed">
                                    {data.description}
                                </p>
                            </div>

                            {/* Two Column Layout */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                
                                {/* Real World Examples */}
                                <div className="bg-gray-50 p-6 rounded-xl border border-gray-200">
                                    <h4 className="flex items-center gap-2 font-bold text-gray-800 mb-6 text-lg border-b border-gray-200 pb-2">
                                        <Lightbulb size={20} className="text-yellow-600" /> Real-World Examples
                                    </h4>
                                    <ul className="space-y-4">
                                        {data.examples.map((ex, i) => (
                                            <li key={i} className="flex flex-col gap-1">
                                                <span className="font-semibold text-gray-800 text-sm">{ex.title}</span>
                                                <span className="text-gray-600 text-sm bg-white p-2 rounded border border-gray-100 shadow-sm">
                                                    {ex.desc}
                                                </span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                {/* The Kenway Edge */}
                                <div className={`p-6 rounded-xl border ${data.border} ${data.bgLight}`}>
                                    <h4 className={`flex items-center gap-2 font-bold ${data.color} mb-4 text-lg`}>
                                        <ShieldCheck size={22} /> The Kenway Edge
                                    </h4>
                                    <p className="text-gray-700 leading-relaxed text-sm">
                                        {data.kenwayEdge}
                                    </p>
                                    <div className="mt-6 pt-6 border-t border-gray-200/50">
                                        <button className={`w-full py-2 px-4 rounded font-bold text-sm bg-white shadow-sm border ${data.border} ${data.color} hover:bg-opacity-50 transition-colors`}>
                                            Discuss {data.title} Strategies &rarr;
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const ArchitectureModal = ({ flowData, onClose }) => {
            if (!flowData) return null;
            const data = flowData;

            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-kenway-navy/50 backdrop-blur-sm animate-in fade-in duration-200">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto flex flex-col">
                        
                        {/* Header */}
                        <div className="p-8 border-b border-gray-100 flex justify-between items-start bg-gray-50 sticky top-0 z-10 rounded-t-2xl">
                            <div>
                                <div className="flex items-center gap-3 mb-2">
                                    <span className="bg-kenway-blue text-white px-2 py-1 rounded text-xs font-bold tracking-wider">ARCHITECTURE VIEW</span>
                                    <h2 className="text-2xl font-bold text-kenway-navy m-0">{data.title}</h2>
                                </div>
                                <p className="text-gray-600 m-0">{data.description}</p>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-gray-200 rounded-full transition-colors">
                                <X size={24} className="text-gray-500" />
                            </button>
                        </div>

                        {/* Content */}
                        <div className="p-8 md:p-12">
                            
                            {/* Flow Diagram */}
                            <div className="relative mb-16">
                                <h3 className="text-sm font-bold text-gray-400 uppercase tracking-widest mb-8">Data Flow Diagram</h3>
                                
                                {/* Desktop Flow */}
                                <div className="hidden md:flex justify-between items-center relative">
                                    {/* Connecting Line */}
                                    <div className="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-0 rounded"></div>
                                    
                                    {data.steps.map((step, idx) => {
                                        const StepIcon = IconMap[step.icon] || Zap; // Fallback to Zap
                                        return (
                                            <div key={idx} className="relative z-10 flex flex-col items-center group cursor-default">
                                                <div className={`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg text-white mb-4 flow-node ${step.color} ${step.highlight ? 'ring-4 ring-purple-100 ring-offset-2' : ''}`}>
                                                    <StepIcon size={28} />
                                                </div>
                                                <div className="text-center bg-white p-2 rounded-lg border border-gray-100 shadow-sm w-32">
                                                    <div className={`text-[10px] font-bold mb-1 ${step.color.replace('bg-', 'text-')}`}>{step.stage}</div>
                                                    <div className="font-bold text-sm text-kenway-navy leading-tight">{step.label}</div>
                                                    <div className="text-[10px] text-gray-500 mt-1 truncate">{step.system}</div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Mobile Flow */}
                                <div className="md:hidden flex flex-col gap-8 relative">
                                    <div className="absolute left-8 top-0 h-full w-1 bg-gray-200 -z-0"></div>
                                    {data.steps.map((step, idx) => {
                                        const StepIcon = IconMap[step.icon] || Zap;
                                        return (
                                            <div key={idx} className="relative z-10 flex items-center gap-4">
                                                <div className={`w-16 h-16 shrink-0 rounded-2xl flex items-center justify-center shadow-lg text-white ${step.color}`}>
                                                    <StepIcon size={28} />
                                                </div>
                                                <div className="bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex-grow">
                                                    <div className={`text-[10px] font-bold mb-1 ${step.color.replace('bg-', 'text-')}`}>{step.stage}</div>
                                                    <div className="font-bold text-sm text-kenway-navy">{step.label}</div>
                                                    <div className="text-xs text-gray-500">{step.system}</div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* Tech Stack & Details */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div className="bg-gray-50 p-6 rounded-xl border border-gray-200">
                                    <h4 className="flex items-center gap-2 font-bold text-kenway-navy mb-4">
                                        <Server size={20} /> Recommended Tech Stack
                                    </h4>
                                    <ul className="space-y-2">
                                        {data.techStack.map((tech, i) => (
                                            <li key={i} className="flex items-center gap-2 text-sm text-gray-700">
                                                <CheckCircle size={16} className="text-green-500" /> {tech}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                                <div className="bg-blue-50 p-6 rounded-xl border border-blue-100">
                                    <h4 className="flex items-center gap-2 font-bold text-kenway-navy mb-4">
                                        <Activity size={20} /> Success Criteria
                                    </h4>
                                    <p className="text-sm text-gray-700">
                                        {data.successCriteria}
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const TitanCard = ({ letter, title, icon: Icon, desc, color, onClick }) => (
            <div 
                onClick={onClick}
                className="card-hover relative p-8 bg-white border border-gray-100 rounded-xl shadow-sm transition-all duration-300 h-full flex flex-col cursor-pointer group"
            >
                <div className={`absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity ${color}`}>
                    <Icon size={80} />
                </div>
                <div className="flex items-center gap-4 mb-6">
                    <span className={`flex shrink-0 items-center justify-center w-14 h-14 text-2xl font-bold text-white rounded-lg shadow-md group-hover:scale-110 transition-transform ${color.replace('text-', 'bg-')}`}>
                        {letter}
                    </span>
                    <h3 className="text-2xl font-bold text-kenway-navy m-0 tracking-tight">{title}</h3>
                </div>
                <div className="text-sm text-kenway-blue leading-relaxed font-medium flex-1 flex flex-col">
                    {desc}
                </div>
                <div className="mt-4 text-xs font-bold text-gray-400 uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">
                    Explore Stage <ArrowRight size={12}/>
                </div>
            </div>
        );

        const TitanLoopVisual = () => {
            return (
                <div className="relative w-full max-w-lg mx-auto my-16 aspect-square flex items-center justify-center bg-white rounded-full shadow-inner p-12">
                    {/* Central Brain */}
                    <div className="absolute z-20 flex flex-col items-center justify-center w-36 h-36 bg-kenway-navy text-white rounded-full shadow-2xl border-4 border-kenway-blue">
                        <BrainCircuit size={48} className="text-white mb-2 opacity-90" />
                        <span className="text-sm font-bold tracking-widest">THINK</span>
                        <span className="text-[10px] text-gray-300 text-center px-2 mt-1 font-medium">Intelligence Layer</span>
                    </div>

                    {/* Orbit Ring */}
                    <div className="absolute w-full h-full pointer-events-none">
                        <svg viewBox="0 0 512 512" className="w-full h-full animate-[spin_80s_linear_infinite]">
                            {/* Dashed Ring */}
                            <circle cx="256" cy="256" r="192" fill="none" stroke="#cbd5e1" strokeWidth="2" strokeDasharray="8 8" />
                        </svg>
                    </div>

                    {/* Nodes */}
                    <div className="absolute top-0 left-1/2 -translate-x-1/2 translate-y-4 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-kenway-navy rounded-full flex items-center justify-center shadow-lg text-kenway-navy mb-2 z-10">
                            <Zap size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">TRIGGER</span>
                    </div>

                    <div className="absolute top-1/2 right-0 -translate-x-4 -translate-y-1/2 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-kenway-blue rounded-full flex items-center justify-center shadow-lg text-kenway-blue mb-2 z-10">
                            <Database size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">INGEST</span>
                    </div>

                    <div className="absolute bottom-0 left-1/2 -translate-x-1/2 -translate-y-4 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-orange-500 rounded-full flex items-center justify-center shadow-lg text-orange-500 mt-2 order-2 z-10">
                            <Activity size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm order-1">ACT</span>
                    </div>

                    <div className="absolute top-1/2 left-0 translate-x-4 -translate-y-1/2 flex flex-col items-center">
                        <div className="w-14 h-14 bg-white border-2 border-green-600 rounded-full flex items-center justify-center shadow-lg text-green-600 mb-2 z-10">
                            <CheckCircle size={24} />
                        </div>
                        <span className="font-bold text-kenway-navy text-xs tracking-wider bg-white px-2 py-0.5 rounded shadow-sm">NOTIFY</span>
                    </div>
                </div>
            );
        };

        const InventoryTable = ({ data, onSelectFlow }) => {
            const [sortConfig, setSortConfig] = useState({ key: null, direction: 'ascending' });
            const [filterSystem, setFilterSystem] = useState('All');

            const parseImpact = (str) => {
                if (str === 'High Risk') return 999999999;
                const multiplier = str.includes('M') ? 1000000 : str.includes('k') ? 1000 : 1;
                return parseFloat(str.replace(/[^0-9.]/g, '')) * multiplier;
            };

            // Derive unique systems for the filter dropdown
            const systems = React.useMemo(() => {
                if (!data) return ['All'];
                const uniqueSystems = new Set(Object.values(data).map(flow => flow.steps[0].system));
                return ['All', ...Array.from(uniqueSystems).sort()];
            }, [data]);

            const sortedRows = React.useMemo(() => {
                if (!data) return [];
                let rows = Object.entries(data).map(([id, flow]) => ({
                    id,
                    name: flow.title,
                    impact: flow.impact,
                    system: flow.steps[0].system,
                    trigger: flow.steps[0].label,
                    ingest: flow.steps[1].label,
                    think: flow.steps[2].label,
                    act: flow.steps[3].label,
                    notify: flow.steps[4].label
                }));

                // Apply Filter
                if (filterSystem !== 'All') {
                    rows = rows.filter(row => row.system === filterSystem);
                }

                // Apply Sort
                if (sortConfig.key) {
                    rows.sort((a, b) => {
                        let aVal = a[sortConfig.key];
                        let bVal = b[sortConfig.key];

                        if (sortConfig.key === 'impact') {
                            aVal = parseImpact(aVal);
                            bVal = parseImpact(bVal);
                        }

                        if (aVal < bVal) return sortConfig.direction === 'ascending' ? -1 : 1;
                        if (aVal > bVal) return sortConfig.direction === 'ascending' ? 1 : -1;
                        return 0;
                    });
                }
                return rows;
            }, [sortConfig, filterSystem, data]);

            const handleSort = (key) => {
                setSortConfig(current => ({
                    key,
                    direction: current.key === key && current.direction === 'ascending' ? 'descending' : 'ascending'
                }));
            };

            const SortIcon = ({ column }) => {
                if (sortConfig.key !== column) return <span className="w-4 h-4 ml-1 inline-block opacity-0 group-hover:opacity-30"><ChevronDown size={14}/></span>;
                return sortConfig.direction === 'ascending' 
                    ? <span className="w-4 h-4 ml-1 inline-block text-kenway-blue"><ChevronUp size={14}/></span>
                    : <span className="w-4 h-4 ml-1 inline-block text-kenway-blue"><ChevronDown size={14}/></span>;
            };

            if (!data) return <div className="p-8 text-center text-gray-500">Loading inventory data...</div>;

            return (
                <div className="flex flex-col gap-4">
                    {/* Filter Bar */}
                    <div className="flex justify-end">
                        <div className="relative inline-block w-64">
                            <select 
                                value={filterSystem}
                                onChange={(e) => setFilterSystem(e.target.value)}
                                className="block appearance-none w-full bg-white border border-gray-300 hover:border-gray-400 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:ring-1 focus:ring-kenway-blue focus:border-kenway-blue text-sm font-medium text-gray-700 cursor-pointer"
                            >
                                {systems.map(sys => (
                                    <option key={sys} value={sys}>{sys === 'All' ? 'Filter by System: All' : sys}</option>
                                ))}
                            </select>
                            <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                <ChevronDown size={14} />
                            </div>
                        </div>
                    </div>

                    <div className="overflow-x-auto bg-white border border-gray-200 rounded-xl shadow-lg">
                        <table className="min-w-full divide-y divide-gray-200 text-sm">
                            <thead className="bg-kenway-navy text-white">
                                <tr>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide">Opportunity</th>
                                    <th 
                                        className="px-6 py-4 text-left font-semibold tracking-wide cursor-pointer group select-none hover:bg-white/10 transition-colors"
                                        onClick={() => handleSort('system')}
                                    >
                                        <div className="flex items-center">
                                            Source System <SortIcon column="system" />
                                        </div>
                                    </th>
                                    <th 
                                        className="px-6 py-4 text-left font-semibold tracking-wide cursor-pointer group select-none hover:bg-white/10 transition-colors"
                                        onClick={() => handleSort('impact')}
                                    >
                                        <div className="flex items-center">
                                            Impact <SortIcon column="impact" />
                                        </div>
                                    </th>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide text-kenway-blue">T - Trigger</th>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide text-cyan-400">I - Ingest</th>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide text-purple-300">T - Think</th>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide text-orange-300">A - Act</th>
                                    <th className="px-6 py-4 text-left font-semibold tracking-wide text-green-300">N - Notify</th>
                                    <th className="px-6 py-4"></th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                {sortedRows.map((row, idx) => (
                                    <tr key={idx} className="hover:bg-blue-50 transition-colors group">
                                        <td className="px-6 py-4 font-bold text-kenway-navy">{row.name}</td>
                                        <td className="px-6 py-4 text-gray-600 font-medium text-xs">{row.system}</td>
                                        <td className="px-6 py-4 text-gray-600 font-medium">{row.impact}</td>
                                        <td className="px-6 py-4 text-gray-500">{row.trigger}</td>
                                        <td className="px-6 py-4 text-gray-500">{row.ingest}</td>
                                        <td className="px-6 py-4">
                                            <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200">
                                                {row.think}
                                            </span>
                                        </td>
                                        <td className="px-6 py-4 text-gray-500">{row.act}</td>
                                        <td className="px-6 py-4 text-gray-500">{row.notify}</td>
                                        <td className="px-6 py-4 text-right">
                                            <button 
                                                onClick={() => onSelectFlow(row.id)}
                                                className="opacity-0 group-hover:opacity-100 transition-opacity bg-kenway-blue text-white px-3 py-1.5 rounded text-xs font-semibold flex items-center gap-1 hover:bg-kenway-navy"
                                            >
                                                View <ArrowRight size={12}/>
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                                {sortedRows.length === 0 && (
                                    <tr>
                                        <td colSpan="9" className="px-6 py-8 text-center text-gray-500">
                                            No opportunities found for the selected system.
                                        </td>
                                    </tr>
                                )}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const ROICalc = () => {
            const [volume, setVolume] = useState(500);
            const [minutes, setMinutes] = useState(15);
            const [rate, setRate] = useState(50);
            const [cost, setCost] = useState(25000);

            const annualSavings = (volume * (minutes / 60) * rate) * 12;
            const roiMonths = cost / (annualSavings / 12);

            return (
                <div className="bg-white border border-gray-200 p-8 rounded-xl shadow-lg">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                        <div className="space-y-6">
                            <h4 className="font-bold text-kenway-navy flex items-center gap-2 text-lg border-b border-gray-100 pb-2">
                                <Calculator size={20} className="text-kenway-blue" /> Opportunity Inputs
                            </h4>
                            <div className="grid grid-cols-1 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Monthly Volume</label>
                                    <input type="number" value={volume} onChange={e => setVolume(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Manual Time (Mins/Unit)</label>
                                    <input type="number" value={minutes} onChange={e => setMinutes(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Hourly Labor Rate ($)</label>
                                    <input type="number" value={rate} onChange={e => setRate(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Est. Implementation Cost ($)</label>
                                    <input type="number" value={cost} onChange={e => setCost(e.target.value)} className="block w-full rounded-lg border-gray-300 shadow-sm focus:border-kenway-blue focus:ring-kenway-blue sm:text-sm p-3 border bg-gray-50" />
                                </div>
                            </div>
                        </div>
                        <div className="bg-kenway-navy text-white p-8 rounded-xl shadow-inner flex flex-col justify-center space-y-8 relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-8 opacity-5">
                                <Activity size={120} />
                            </div>
                            <div className="relative z-10">
                                <span className="block text-sm text-blue-200 font-medium uppercase tracking-wider mb-1">Projected Annual Savings</span>
                                <span className="text-4xl font-bold text-white">${annualSavings.toLocaleString()}</span>
                            </div>
                            <div className="relative z-10">
                                <span className="block text-sm text-blue-200 font-medium uppercase tracking-wider mb-1">ROI Break-even</span>
                                <span className="text-4xl font-bold text-kenway-blue">{roiMonths.toFixed(1)} Months</span>
                            </div>
                            <div className="text-xs text-gray-400 mt-4 pt-4 border-t border-blue-900">
                                *Estimates based on provided labor inputs. Actual results may vary based on complexity.
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const App = () => {
            const [mobileOpen, setMobileOpen] = useState(false);
            const [activeSection, setActiveSection] = useState('intro');
            const [selectedFlowId, setSelectedFlowId] = useState(null);
            const [selectedMethodology, setSelectedMethodology] = useState(null);
            const [inventoryData, setInventoryData] = useState(null);
            const [loading, setLoading] = useState(true);

            // Fetch Data
            useEffect(() => {
                fetch('assets/inventory.json')
                    .then(res => {
                        if (!res.ok) throw new Error("Network response was not ok");
                        return res.json();
                    })
                    .then(data => {
                        setInventoryData(data);
                        setLoading(false);
                    })
                    .catch(err => {
                        console.error("Failed to load inventory:", err);
                        // Fallback to static data if JSON fetch fails
                        setInventoryData(FLOW_DETAILS);
                        setLoading(false);
                    });
            }, []);

            // Scroll Spy Logic
            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setActiveSection(entry.target.id);
                        }
                    });
                }, {
                    rootMargin: "-20% 0px -60% 0px", // Trigger when top of section is 20% down the screen, exit when it's 60% up
                    threshold: 0.1
                });

                const sectionIds = ['intro', 'methodology', 'loop', 'inventory', 'roi'];
                sectionIds.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) observer.observe(el);
                });

                return () => observer.disconnect();
            }, []);

            // Handle URL params for deep linking
            useEffect(() => {
                if (loading || !inventoryData) return;
                
                const params = new URLSearchParams(window.location.search);
                const flowId = params.get('flow');
                if (flowId && inventoryData[flowId]) {
                    setSelectedFlowId(flowId);
                }
            }, [loading, inventoryData]);

            const handleFlowSelect = (id) => {
                setSelectedFlowId(id);
                // Update URL without refresh
                const url = new URL(window.location);
                url.searchParams.set('flow', id);
                window.history.pushState({}, '', url);
            };

            const handleCloseModal = () => {
                setSelectedFlowId(null);
                setSelectedMethodology(null);
                const url = new URL(window.location);
                url.searchParams.delete('flow');
                window.history.pushState({}, '', url);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <Sidebar 
                        activeSection={activeSection} 
                        setActiveSection={setActiveSection} 
                        mobileOpen={mobileOpen} 
                        setMobileOpen={setMobileOpen} 
                    />

                    {/* Mobile Header */}
                    <div className="md:hidden flex items-center justify-between p-4 bg-kenway-navy text-white fixed top-0 w-full z-40 shadow-md">
                        <span className="text-lg font-bold">TITAN Framework</span>
                        <button onClick={() => setMobileOpen(true)}>
                            <Menu size={24} />
                        </button>
                    </div>

                    {/* Modals */}
                    {selectedFlowId && inventoryData && (
                        <ArchitectureModal 
                            flowData={inventoryData[selectedFlowId]} 
                            onClose={handleCloseModal} 
                        />
                    )}
                    
                    {selectedMethodology && (
                        <MethodologyModal
                            stepId={selectedMethodology}
                            onClose={handleCloseModal}
                        />
                    )}

                    {/* Main Content */}
                    <main className="md:ml-64 pt-20 md:pt-0">
                        {/* Changed max-w-5xl to max-w-7xl for wider layout */}
                        <div className="max-w-7xl mx-auto px-8 py-16 prose prose-slate max-w-none">
                            
                            {/* Hero Section */}
                            <section id="intro" className="mb-24 max-w-5xl mx-auto">
                                <div className="hero-gradient text-white p-12 rounded-2xl mb-10 shadow-xl relative overflow-hidden">
                                    <div className="relative z-10">
                                        <h1 className="text-4xl md:text-5xl font-bold mb-6 tracking-tight !text-white !mt-0 text-gradient-red">TITAN Framework</h1>
                                        <p className="!text-cyan-200 text-xl leading-relaxed !mb-0 max-w-2xl font-medium">
                                            The enterprise standard for building <strong>Cognitive Integration Loops</strong>. 
                                            Move beyond "dumb pipes" to autonomous systems that think and act.
                                        </p>
                                    </div>
                                    <div className="absolute right-0 bottom-0 opacity-10 transform translate-x-12 translate-y-12">
                                        <BrainCircuit size={300} />
                                    </div>
                                </div>
                                
                                <div className="bg-white border-l-4 border-kenway-blue p-6 rounded-r-lg shadow-sm">
                                    <h4 className="text-kenway-navy font-bold m-0 flex items-center gap-3 text-lg">
                                        <LayoutTemplate size={20} className="text-kenway-blue"/> Enterprise Architecture Standard
                                    </h4>
                                    <p className="m-0 text-gray-600 mt-2">
                                        Designed specifically for the modern enterprise stack: <strong>Dynamics 365 F&SCM</strong>, <strong>Business Central</strong>, <strong>Salesforce</strong>, and <strong>SAP</strong>. TITAN replaces fragile point-to-point integrations with a robust, event-driven architecture pattern standardizing communication across Azure, AWS, and SAP BTP.
                                    </p>
                                </div>

                                <p className="text-lg mt-8 leading-relaxed">
                                    Modern enterprises cannot survive on "Data Movement" alone. They require "Decision Velocity." 
                                    The TITAN framework provides a rigorous taxonomy for identifying, building, and measuring 
                                    automation loops that drive business value.
                                </p>
                            </section>

                            {/* Methodology Section */}
                            <section id="methodology" className="mb-24 pt-10">
                                <div className="max-w-5xl mx-auto">
                                    <h2>The Methodology</h2>
                                    <p className="text-lg">
                                        Every robust automation consists of five distinct stages. Failing to account for any single stage results in fragile, unscalable integrations.
                                    </p>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-5 gap-6 mt-10 not-prose">
                                    <TitanCard 
                                        letter="T" title="Trigger" color="text-kenway-navy" icon={Zap}
                                        onClick={() => setSelectedMethodology('T1')}
                                        desc={
                                            <>
                                                <div>
                                                    <strong className="block mb-2 text-kenway-navy text-base">The Pulse</strong>
                                                    What initiates the loop?
                                                    <ul className="list-disc pl-4 mt-2 space-y-1 opacity-80">
                                                        <li>Business Event</li>
                                                        <li>Temporal Event</li>
                                                        <li>Sensor Signal</li>
                                                    </ul>
                                                </div>
                                                <div className="mt-auto pt-6 border-t border-blue-100/50 text-kenway-navy italic opacity-90">
                                                    "Don't just wait. React."
                                                </div>
                                            </>
                                        } 
                                    />
                                    <TitanCard 
                                        letter="I" title="Ingest" color="text-kenway-blue" icon={Database}
                                        onClick={() => setSelectedMethodology('I')}
                                        desc={
                                            <>
                                                <div>
                                                    <strong className="block mb-2 text-kenway-navy text-base">The Context</strong>
                                                    Raw triggers are rarely enough. We must 'hydrate' the event with:
                                                    <ul className="list-disc pl-4 mt-2 space-y-1 opacity-80">
                                                        <li>Historical Data</li>
                                                        <li>Master Data</li>
                                                        <li>Cross-Reference IDs</li>
                                                    </ul>
                                                </div>
                                                <div className="mt-auto pt-6 border-t border-blue-100/50 text-kenway-navy italic opacity-90">
                                                    "Data without context is noise."
                                                </div>
                                            </>
                                        } 
                                    />
                                    
                                    <TitanCard 
                                        letter="T" title="Think" color="text-purple-600" icon={BrainCircuit}
                                        onClick={() => setSelectedMethodology('T2')}
                                        desc={
                                            <>
                                                <div>
                                                    <strong className="block mb-2 text-kenway-navy text-base">The Intelligence</strong>
                                                    The key differentiator.
                                                    <ul className="list-disc pl-4 mt-2 space-y-1 opacity-80">
                                                        <li>Boolean Rules</li>
                                                        <li>Agentic AI</li>
                                                        <li>Sentiment Analysis</li>
                                                    </ul>
                                                </div>
                                                <div className="mt-auto pt-6 border-t border-blue-100/50 text-kenway-navy italic opacity-90">
                                                    "Move from automation to autonomy."
                                                </div>
                                            </>
                                        } 
                                    />
                                    
                                    <TitanCard 
                                        letter="A" title="Act" color="text-orange-500" icon={Activity}
                                        onClick={() => setSelectedMethodology('A')}
                                        desc={
                                            <>
                                                <div>
                                                    <strong className="block mb-2 text-kenway-navy text-base">The Muscle</strong>
                                                    The deterministic state change in the target system.
                                                    <div className="mt-2 opacity-80">
                                                        Must be idempotent and transactional.
                                                    </div>
                                                </div>
                                                <div className="mt-auto pt-6 border-t border-blue-100/50 text-kenway-navy italic opacity-90">
                                                    "Execute with precision."
                                                </div>
                                            </>
                                        } 
                                    />
                                    <TitanCard 
                                        letter="N" title="Notify" color="text-green-600" icon={CheckCircle}
                                        onClick={() => setSelectedMethodology('N')}
                                        desc={
                                            <>
                                                <div>
                                                    <strong className="block mb-2 text-kenway-navy text-base">The Resolution</strong>
                                                    Closing the loop.
                                                    <ul className="list-disc pl-4 mt-2 space-y-1 opacity-80">
                                                        <li>Proof of Success</li>
                                                        <li>Failure Alerts</li>
                                                        <li>Transaction Receipt</li>
                                                    </ul>
                                                </div>
                                                <div className="mt-auto pt-6 border-t border-blue-100/50 text-kenway-navy italic opacity-90">
                                                    "Every action needs a receipt."
                                                </div>
                                            </>
                                        } 
                                    />
                                </div>
                            </section>

                            {/* Visualizing Loop Section */}
                            <section id="loop" className="mb-24 pt-10 max-w-5xl mx-auto">
                                <h2>Visualizing the Loop</h2>
                                <p className="text-lg">
                                    Unlike linear ETL pipelines, a TITAN is a continuous loop. The "Notify" step of one process often becomes the "Trigger" for the next, creating a self-reinforcing system of intelligence.
                                </p>
                                <TitanLoopVisual />
                            </section>

                            {/* Inventory Section */}
                            <section id="inventory" className="mb-24 pt-10 max-w-7xl mx-auto">
                                <h2>Discovery Inventory</h2>
                                <p className="text-lg">
                                    Use the <strong>TITAN Controlled Vocabulary</strong> to build your backlog. Select a row to view the architecture deep-dive.
                                </p>
                                <div className="not-prose mt-10">
                                    <InventoryTable 
                                        data={inventoryData}
                                        onSelectFlow={handleFlowSelect} 
                                    />
                                </div>
                            </section>

                            {/* ROI Section */}
                            <section id="roi" className="mb-24 pt-10 max-w-5xl mx-auto">
                                <h2>ROI Estimation Engine</h2>
                                <p className="text-lg">
                                    Don't build just to build. Use the standard formula to justify the engineering effort for every TITAN loop.
                                </p>
                                <div className="not-prose mt-10">
                                    <ROICalc />
                                </div>
                            </section>

                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
